(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"./assets/js/utility-animation.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.parse-int.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _state_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./assets/js/state.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var UtilityAnimation=function(){function UtilityAnimation(root){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UtilityAnimation),this.root=root,this.count=1,this.selector=this.getCurrentSelector(),this.currentElements=this.root.querySelectorAll(this.selector),this.root.matches(this.selector)&&(this.currentElements=this.mergeNodes(this.root,this.currentElements)),this.resetAnimation(),this.initialize()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(UtilityAnimation,[{key:"resetAnimation",value:function resetAnimation(){this.root.querySelectorAll("."+_state_js__WEBPACK_IMPORTED_MODULE_7__.a.IS_STARTING).forEach((function(element){element.classList.remove(_state_js__WEBPACK_IMPORTED_MODULE_7__.a.IS_STARTING)}))}},{key:"mergeNodes",value:function mergeNodes(Node,NodeList){var array=Array.from(NodeList);return array.unshift(Node),array}},{key:"getCurrentSelector",value:function getCurrentSelector(){return'[data-utility-animation-step="'+this.count+'"]'}},{key:"updateCurrentElement",value:function updateCurrentElement(event){var newArray=[];this.currentElements.forEach((function(element){event.srcElement!==element&&newArray.push(element)})),this.currentElements=newArray}},{key:"handleAnimationEnd",value:function handleAnimationEnd(event){var group=this.getGroup(event.srcElement);if(group){var oldItemsValue=parseInt(group.style.getPropertyValue("--utility-animation-items-loaded"),10)||0;group.style.setProperty("--utility-animation-items-loaded",oldItemsValue+1)}this.updateCurrentElement(event),this.currentElements.length>0||(this.count++,this.currentElements=this.root.querySelectorAll(this.getCurrentSelector()),null!==this.currentElements&&this.currentElements.length>0?this.startStepAnimation(this.currentElements):this.setEnd())}},{key:"startStepAnimation",value:function startStepAnimation(elements){elements.forEach((function(element){element.classList.add(_state_js__WEBPACK_IMPORTED_MODULE_7__.a.IS_STARTING)}))}},{key:"setEnd",value:function setEnd(){this.root.setAttribute(UtilityAnimation.endDataset,!0)}},{key:"startAnimation",value:function startAnimation(){this.startStepAnimation(this.currentElements)}},{key:"getGroup",value:function getGroup(element){return element.closest(".utility-animation__group")}},{key:"initialize",value:function initialize(){var _this=this;this.root.addEventListener("animationend",(function(event){_this.handleAnimationEnd(event)})),new MutationObserver((function(mutations){mutations.forEach((function(mutation){var _mutation$target;"attributes"===mutation.type&&mutation.attributeName.startsWith(UtilityAnimation.inViewportDataset)&&("true"===(null===(_mutation$target=mutation.target)||void 0===_mutation$target?void 0:_mutation$target.getAttribute(UtilityAnimation.inViewportDataset))&&_this.startAnimation())}))})).observe(this.root,{attributes:!0})}}],[{key:"hasPercentageOffset",value:function hasPercentageOffset(instance){return instance.root.classList.contains("utility-animation--percentage-offset")}},{key:"hasSmallOffset",value:function hasSmallOffset(instance){return instance.root.classList.contains("utility-animation--small-offset")}},{key:"addObserver",value:function addObserver(){var _this2=this,callback=function callback(entries){entries.forEach((function(entry){entry.isIntersecting?entry.target.setAttribute(_this2.inViewportDataset,!0):entry.target.classList.contains("utility-animation--enter-exit")&&entry.target.removeAttribute(_this2.inViewportDataset)}))},observer=new IntersectionObserver(callback,{rootMargin:"0px 0px -200px 0px",threshold:0}),percentageOffsetObserver=new IntersectionObserver(callback,{rootMargin:"0px 0px 0px 0px",threshold:.4}),smallOffsetObserver=new IntersectionObserver(callback,{rootMargin:"0px 0px -100px 0px",threshold:0});this.instances.forEach((function(instance){UtilityAnimation.hasSmallOffset(instance)?smallOffsetObserver.observe(instance.root):UtilityAnimation.hasPercentageOffset(instance)?percentageOffsetObserver.observe(instance.root):observer.observe(instance.root)}))}},{key:"init",value:function init(){var _this3=this;this.instances=[],[].forEach.call(document.querySelectorAll(this.rootSelector),(function(element){_this3.instances.push(new _this3(element))})),this.addObserver()}}]),UtilityAnimation}();UtilityAnimation.rootSelector=".utility-animation",UtilityAnimation.inViewportDataset="data-utility-animation-in-viewport",UtilityAnimation.endDataset="data-utility-animation-end",UtilityAnimation.instances=[],__webpack_exports__.default=UtilityAnimation}}]);