(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"./assets/js/components/base-component.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _state_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./assets/js/state.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var BaseComponent=function(){function BaseComponent(root,options){var _this$options;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseComponent),this.root=root,this.options=options,null!==(_this$options=this.options)&&void 0!==_this$options&&_this$options.noInit||this.root.classList.add(_state_js__WEBPACK_IMPORTED_MODULE_3__.a.INITIALIZED)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BaseComponent,null,[{key:"getInstancesKey",value:function getInstancesKey(){return this.rootSelector.substring(1)}},{key:"expose",value:function expose(instance){window[BaseComponent.namespacePrefix]||(window[BaseComponent.namespacePrefix]={});var instanceKey=this.getInstancesKey();window[BaseComponent.namespacePrefix][instanceKey]||(window[BaseComponent.namespacePrefix][instanceKey]=[]),window[BaseComponent.namespacePrefix][this.getInstancesKey()].push(instance)}},{key:"getInstance",value:function getInstance(element){var instance=window[BaseComponent.namespacePrefix][this.getInstancesKey()].filter((function(value){return(null==value?void 0:value.root)===element}));return instance?instance[0]:null}},{key:"initElement",value:function initElement(element,options){var instance=new this(element,options);return this.instances.push(instance),this.expose(instance),instance}},{key:"init",value:function init(element){var _this=this;this.instances=[];var selectedElement=element||document,notInitializedSelector=this.rootSelector+":not(."+_state_js__WEBPACK_IMPORTED_MODULE_3__.a.INITIALIZED+")";[].forEach.call(selectedElement.querySelectorAll(notInitializedSelector),(function(element){_this.initElement(element)}))}}]),BaseComponent}();BaseComponent.rootSelector="",BaseComponent.instances=[],BaseComponent.namespacePrefix="baseComponents",__webpack_exports__.a=BaseComponent},"./assets/js/components/form-attachments.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/web.timers.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var _base_component_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./assets/js/components/base-component.js"),_tools_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./assets/js/tools.js"),_state_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./assets/js/state.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var FormAttachments=function(_BaseComponent){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(FormAttachments,_BaseComponent);var _super=_createSuper(FormAttachments);function FormAttachments(root,options){var _this$error,_window$i18n,_window$i18n$loader,_this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FormAttachments),(_this=_super.call(this,root,options)).buttonSelector=".form-attachments__button",_this.textSelector=".form-attachments__text",_this.fileSelector=".form-attachments__file",_this.errorSelector=".form-attachments__error",_this.button=_this.root.querySelector(_this.buttonSelector),_this.text=_this.root.querySelector(_this.textSelector),_this.file=_this.root.querySelector(_this.fileSelector),_this.error=_this.root.querySelector(_this.errorSelector),_this.base64=_this.root.querySelector(FormAttachments.base64Selector),_this.isRequired=_this.file.required,_this.requiredMsg=null===(_this$error=_this.error)||void 0===_this$error?void 0:_this$error.innerText,_this.bindEvents(),_this.text.dataset.text=_this.text.innerText.trim(),null===(_window$i18n=window.i18n)||void 0===_window$i18n||null===(_window$i18n$loader=_window$i18n.loader)||void 0===_window$i18n$loader||_window$i18n$loader.then((function(){var _window$i18n2;_this.wrongTypeText=null===(_window$i18n2=window.i18n)||void 0===_window$i18n2?void 0:_window$i18n2.translate("formAttachmentsWrongType")})),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(FormAttachments,[{key:"bindEvents",value:function bindEvents(){var _this$file;this.root.addEventListener("drag",this.handleDragStart.bind(this)),this.root.addEventListener("dragstart",this.handleDragStart.bind(this)),this.root.addEventListener("dragover",this.handleDragOver.bind(this)),this.root.addEventListener("dragenter",this.handleDragOver.bind(this)),this.root.addEventListener("drop",this.handleDrop.bind(this)),this.root.addEventListener("dragleave",this.handleDrop.bind(this)),this.root.addEventListener("dragend",this.handleDrop.bind(this)),this.root.addEventListener("click",this.handleAddAttachment.bind(this)),null===(_this$file=this.file)||void 0===_this$file||_this$file.addEventListener("change",this.handleChange.bind(this));var parent=_tools_js__WEBPACK_IMPORTED_MODULE_14__.a.getParent(this.root,"form");null==parent||parent.addEventListener("reset",this.resetText.bind(this))}},{key:"handleDragStart",value:function handleDragStart(e){e.preventDefault(),e.stopPropagation()}},{key:"handleDragOver",value:function handleDragOver(e){e.preventDefault(),e.stopPropagation(),window.clearTimeout(this.dropTimeout),this.root.classList.add(_state_js__WEBPACK_IMPORTED_MODULE_15__.a.DRAGGING)}},{key:"handleDrop",value:function handleDrop(e){var _e$dataTransfer,_this2=this;e.preventDefault(),e.stopPropagation();var droppedFiles=null==e||null===(_e$dataTransfer=e.dataTransfer)||void 0===_e$dataTransfer?void 0:_e$dataTransfer.files;this.dropTimeout=window.setTimeout((function(){_this2.root.classList.remove(_state_js__WEBPACK_IMPORTED_MODULE_15__.a.DRAGGING),"drop"===e.type&&_this2.handleDroppedFiles(droppedFiles)}),50)}},{key:"isAllowedFileExtension",value:function isAllowedFileExtension(file){var _this$file$getAttribu,accept=null===(_this$file$getAttribu=this.file.getAttribute("accept"))||void 0===_this$file$getAttribu?void 0:_this$file$getAttribu.toLowerCase(),allowedExtensions=(null==accept?void 0:accept.split(","))||[],fileExtension=_tools_js__WEBPACK_IMPORTED_MODULE_14__.a.getExtension(file.name);return allowedExtensions.includes("."+fileExtension)}},{key:"handleDroppedFiles",value:function handleDroppedFiles(droppedFiles){var _this3=this,droppedFile=droppedFiles[0];if(!this.isAllowedFileExtension(droppedFile))return this.showError(this.wrongTypeText);_tools_js__WEBPACK_IMPORTED_MODULE_14__.a.toBase64(droppedFile).then((function(data){_this3.appendDroppedFile(data,droppedFile.name),_this3.switchText(droppedFiles)}))}},{key:"handleAddAttachment",value:function handleAddAttachment(){this.file.click()}},{key:"showError",value:function showError(text){this.resetFile(),this.setErrorText(text),this.root.classList.add(_state_js__WEBPACK_IMPORTED_MODULE_15__.a.HAS_ERROR)}},{key:"setErrorText",value:function setErrorText(text){this.error&&(this.error.innerText=text)}},{key:"resetText",value:function resetText(){this.text.innerText=this.text.dataset.text}},{key:"resetError",value:function resetError(){this.setErrorText(this.requiredMsg),this.root.classList.remove(_state_js__WEBPACK_IMPORTED_MODULE_15__.a.HAS_ERROR)}},{key:"appendDroppedFile",value:function appendDroppedFile(data,name){this.base64&&(this.isRequired&&(this.file.required=!1),this.file.value=null,this.base64.dataset.fileName=name,this.base64.value=data)}},{key:"resetFile",value:function resetFile(){this.file.value=null,this.resetText(),this.resetDroppedFile()}},{key:"resetDroppedFile",value:function resetDroppedFile(){this.base64&&(this.isRequired&&(this.file.required=!0),this.base64.removeAttribute("data-file-name"),this.base64.value=null)}},{key:"switchText",value:function switchText(files){var _file$name,file=files[0],fileName=null!==(_file$name=null==file?void 0:file.name)&&void 0!==_file$name?_file$name:null;fileName?(this.text.innerHTML=fileName+" <nobr>( "+_tools_js__WEBPACK_IMPORTED_MODULE_14__.a.toSize(file.size)+" )</nobr>",this.resetError()):this.resetText()}},{key:"handleChange",value:function handleChange(event){var _event$target,_event$target2;if(!this.isAllowedFileExtension(null==event||null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.files[0]))return this.showError(this.wrongTypeText);(this.resetDroppedFile(),""===this.file.value)?this.resetText():this.switchText(null==event||null===(_event$target2=event.target)||void 0===_event$target2?void 0:_event$target2.files)}}]),FormAttachments}(_base_component_js__WEBPACK_IMPORTED_MODULE_13__.a);FormAttachments.rootSelector=".form-attachments",FormAttachments.base64Selector=".form-attachments__base64",__webpack_exports__.default=FormAttachments},"./node_modules/core-js/modules/es.object.create.js":function(module,exports,__webpack_require__){__webpack_require__("./node_modules/core-js/internals/export.js")({target:"Object",stat:!0,sham:!__webpack_require__("./node_modules/core-js/internals/descriptors.js")},{create:__webpack_require__("./node_modules/core-js/internals/object-create.js")})},"./node_modules/core-js/modules/es.object.set-prototype-of.js":function(module,exports,__webpack_require__){__webpack_require__("./node_modules/core-js/internals/export.js")({target:"Object",stat:!0},{setPrototypeOf:__webpack_require__("./node_modules/core-js/internals/object-set-prototype-of.js")})}}]);