{%- assign postTeaserLang = page.lang | default: site.lang | default: "de" -%}
{%- assign postTeaserPost = include.post -%}
{%- assign postTeaserTag = include.tag -%}
{%- assign excerpt = post.excerpt | default: post.content -%}

{%- capture postTeaserPostString -%}
  {%- if postTeaserPost.moment -%}
    {% assign postTeaserPostDate = postTeaserPost.moment %}
  {%- else -%}
    {% assign blogRecentPostDate = postTeaserPost.date %}
  {%- endif -%}
  {
    "url": "{{ postTeaserPost.url }}",
    "title": "{{ postTeaserPost.title | strip_html | escape }}",
    "date": "{{ postTeaserPostDate }}",
    "blogtitlepic": "{{ postTeaserPost.blogtitlepic }}",
    "excerpt": "{{ postTeaserPost.excerpt | strip_html | escape }}",
    "tags": {{ postTeaserPost.tags | jsonify }},
    "lang": "{{ postTeaserPost.lang }}"
  }
{%- endcapture %}
<!-- Shared Post Teaser -->

<post-teaser
  :post="{{ postTeaserPostString | jsonify | escape }}"
  tag="{{ postTeaserTag | cgi-escape }}"
  lang="{{ postTeaserLang }}"
>
</post-teaser>
<!-- End Shared Post Teaser -->
