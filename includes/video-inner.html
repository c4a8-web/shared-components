{% assign video = include.video %}

{% assign cta = props.cta %}

{% capture id %}video-id__{{ video.id }}{% endcapture %}
{% capture frameId %}{{ id }}-frame{% endcapture %}
{% capture level %}{{ include.level | default: "h4" }}{% endcapture %}
<!-- Shared Video Inner Block -->
<div class="video d-flex flex-column h-100 space-bottom-1 space-bottom-lg-0">
  <div id="{{ id }}" class="video-player bg-dark">
    {% if video.lightbox %}
      <a class="js-fancybox media-viewer video-player-btn" href="javascript:;"
        data-hs-fancybox-options='{
            "selector": "#{{ id }} .js-fancybox",
            "speed": 700,
            "buttons": ["fullScreen", "close"],
            "media": {
              "youtube": {
                "url": "//www.youtube-nocookie.com/embed/$4",
                "params": {
                  "autoplay": 1
                }
              }
            }
          }'
          data-src="//www.youtube-nocookie.com/{{ video.id }}"
          data-caption="{{ video.headline }}">
        <div class="img-fluid">
          {%
            include img.html
            img=video.thumb
            cloudinary=true
            alt=video.alt
          %}
        </div>
        <span class="media-viewer-container">
          <span class="video-player-icon">
            <i class="fas fa-play"></i>
          </span>
        </span>
      </a>
    {% else %}
      <!-- Cover Image -->
      <div class="img-fluid video-player-preview">
        {%
          include img.html
          img=video.thumb
          cloudinary=true
          alt=video.alt
        %}
      </div>
      <!-- End Cover Image -->

      {% if video.id %}
      <!-- Play Button -->
      <a class="js-inline-video-player video-player-btn video-player-centered" href="javascript:;"
        data-hs-video-player-options='{
          "videoId": "{{ video.id }}",
          "parentSelector": "#{{ id }}",
          "targetSelector": "#{{ frameId }}",
          "isAutoplay": true,
          "classMap": {
            "toggle": "video-player-played"
          }
        }'>
        <span class="video-player-icon">
          <i class="fas fa-play"></i>
        </span>
      </a>
      <!-- End Play Button -->
      {% endif %}

      <!-- Video Iframe -->
      <div class="embed-responsive embed-responsive-16by9">
        <div id="{{ frameId }}"></div>
      </div>
      <!-- End Video Iframe -->
    {% endif %}

  </div>
  {% if video.headline %}
    <div class="video__content flex-grow-1 py-4 px-3 p-lg-5">
      <div class="row no-gutters d-flex flex-wrap">
        {% if video.logo %}
        <div class="video__logo col-lg-5 order-lg-2 pb-3 pb-lg-0">
          {%
            include img.html
            img=video.logo
            cloudinary=true
            alt=video.logoAlt
          %}
        </div>
        <div class="col-lg-7 order-lg-1">
          {%
            include headline.html
            level=level
            text=video.headline
            classes="h4-font-size"
          %}
        </div>
        {% else %}
        <div class="col-lg-12 order-lg-1">
          {%
            include headline.html
            level=level
            text=video.headline
            classes="h4-font-size"
          %}
        </div>
        {% endif %}
        <div class="col-lg-12 pt-2 pt-lg-4 order-lg-3">
          {{ video.text }}
        </div>
        {% if video.date %}
        <div class="col-lg-12 pt-2 pt-lg-4 order-lg-3">
          {{ video.date }}
        </div>
        {% endif %}
      </div>
      {% if video.ctaText %}
      <div class="pt-4 pt-lg-6 pb-6">
        {%
          include cta.html
          text=video.ctaText
          href=video.ctaHref
          link=video.link
          target=video.target
          type=video.type
        %}
      </div>
      {% endif %}
    </div>
  {% endif %}
</div>
<!-- End Shared Video Inner Block -->
